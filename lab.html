<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Assignment on analysis of the spotify top list and the dropout datasets</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="lab_files/libs/clipboard/clipboard.min.js"></script>
<script src="lab_files/libs/quarto-html/quarto.js"></script>
<script src="lab_files/libs/quarto-html/popper.min.js"></script>
<script src="lab_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="lab_files/libs/quarto-html/anchor.min.js"></script>
<link href="lab_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lab_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="lab_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="lab_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="lab_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="lab.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Assignment on analysis of the spotify top list and the dropout datasets</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="github-url" class="level1">
<h1>GitHub URL</h1>
<p>This is my public GitHub URL: <a href="https://github.com/kaderrsami/spotify_dropout" class="uri">https://github.com/kaderrsami/spotify_dropout</a></p>
</section>
<section id="exercise-1" class="level1">
<h1>Exercise 1</h1>
<section id="question-1" class="level2">
<h2 class="anchored" data-anchor-id="question-1">Question 1</h2>
<p>We are reading in the Spotify dataset and then identifying the number of unique songs, artists, and genres.</p>
<p>The data set contains 1926 unique songs, 835 unique artists, and 59 unique genres. This gives us a broad view of the data’s diversity.</p>
</section>
<section id="question-2" class="level2">
<h2 class="anchored" data-anchor-id="question-2">Question 2</h2>
<p>Here, we are grouping the Spotify dataset by year and finding the number of distinct artists for each year.</p>
<div class="cell-output-display">
<table class="table">
<caption>Number of Distinct Artists Per Year</caption>
<thead>
<tr class="header">
<th style="text-align: right;">Year</th>
<th style="text-align: right;">Number of Distinct Artists</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1998</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">1999</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2000</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="even">
<td style="text-align: right;">2001</td>
<td style="text-align: right;">77</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2002</td>
<td style="text-align: right;">56</td>
</tr>
<tr class="even">
<td style="text-align: right;">2003</td>
<td style="text-align: right;">64</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2004</td>
<td style="text-align: right;">65</td>
</tr>
<tr class="even">
<td style="text-align: right;">2005</td>
<td style="text-align: right;">69</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2006</td>
<td style="text-align: right;">63</td>
</tr>
<tr class="even">
<td style="text-align: right;">2007</td>
<td style="text-align: right;">66</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2008</td>
<td style="text-align: right;">63</td>
</tr>
<tr class="even">
<td style="text-align: right;">2009</td>
<td style="text-align: right;">61</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2010</td>
<td style="text-align: right;">62</td>
</tr>
<tr class="even">
<td style="text-align: right;">2011</td>
<td style="text-align: right;">69</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2012</td>
<td style="text-align: right;">67</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">64</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2014</td>
<td style="text-align: right;">70</td>
</tr>
<tr class="even">
<td style="text-align: right;">2015</td>
<td style="text-align: right;">69</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2016</td>
<td style="text-align: right;">75</td>
</tr>
<tr class="even">
<td style="text-align: right;">2017</td>
<td style="text-align: right;">86</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2018</td>
<td style="text-align: right;">81</td>
</tr>
<tr class="even">
<td style="text-align: right;">2019</td>
<td style="text-align: right;">73</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2020</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
</div>
<p>This table shows the number of distinct artists contributing to the music landscape each year. Trends in these numbers can potentially inform us about the industry’s evolution.</p>
</section>
<section id="question-3" class="level2">
<h2 class="anchored" data-anchor-id="question-3">Question 3</h2>
<p>We are identifying the most popular artist in the dataset based on the number of unique songs.</p>
<p>The most popular artist in the data set is Rihanna with 23 unique songs, indicating a significant contribution to the musical landscape.</p>
</section>
<section id="question-4" class="level2">
<h2 class="anchored" data-anchor-id="question-4">Question 4</h2>
<p>This question aims to calculate various statistics related to the ‘tempo’ of songs, grouped by genre.</p>
<div class="cell-output-display">
<table class="table">
<caption>Statistics by Musical Genre</caption>
<colgroup>
<col style="width: 34%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Genre</th>
<th style="text-align: right;">Minimum Tempo</th>
<th style="text-align: right;">Maximum Tempo</th>
<th style="text-align: right;">Average Tempo</th>
<th style="text-align: right;">Median Tempo</th>
<th style="text-align: right;">Number of Songs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Dance/Electronic</td>
<td style="text-align: right;">75.255</td>
<td style="text-align: right;">179.642</td>
<td style="text-align: right;">125.5075</td>
<td style="text-align: right;">126.0410</td>
<td style="text-align: right;">41</td>
</tr>
<tr class="even">
<td style="text-align: left;">Folk/Acoustic, pop</td>
<td style="text-align: right;">94.931</td>
<td style="text-align: right;">128.945</td>
<td style="text-align: right;">111.9380</td>
<td style="text-align: right;">111.9380</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Folk/Acoustic, rock</td>
<td style="text-align: right;">84.192</td>
<td style="text-align: right;">84.192</td>
<td style="text-align: right;">84.1920</td>
<td style="text-align: right;">84.1920</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Folk/Acoustic, rock, pop</td>
<td style="text-align: right;">138.585</td>
<td style="text-align: right;">138.585</td>
<td style="text-align: right;">138.5850</td>
<td style="text-align: right;">138.5850</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R&amp;B</td>
<td style="text-align: right;">71.815</td>
<td style="text-align: right;">170.661</td>
<td style="text-align: right;">106.9248</td>
<td style="text-align: right;">100.4600</td>
<td style="text-align: right;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">World/Traditional, Folk/Acoustic</td>
<td style="text-align: right;">82.803</td>
<td style="text-align: right;">82.803</td>
<td style="text-align: right;">82.8030</td>
<td style="text-align: right;">82.8030</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">World/Traditional, hip hop</td>
<td style="text-align: right;">98.077</td>
<td style="text-align: right;">101.993</td>
<td style="text-align: right;">100.0350</td>
<td style="text-align: right;">100.0350</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">World/Traditional, pop</td>
<td style="text-align: right;">108.102</td>
<td style="text-align: right;">108.102</td>
<td style="text-align: right;">108.1020</td>
<td style="text-align: right;">108.1020</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">World/Traditional, pop, Folk/Acoustic</td>
<td style="text-align: right;">100.380</td>
<td style="text-align: right;">104.833</td>
<td style="text-align: right;">102.6065</td>
<td style="text-align: right;">102.6065</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">World/Traditional, rock</td>
<td style="text-align: right;">96.000</td>
<td style="text-align: right;">140.083</td>
<td style="text-align: right;">118.0415</td>
<td style="text-align: right;">118.0415</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">World/Traditional, rock, pop</td>
<td style="text-align: right;">132.013</td>
<td style="text-align: right;">139.048</td>
<td style="text-align: right;">135.5305</td>
<td style="text-align: right;">135.5305</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">country</td>
<td style="text-align: right;">103.055</td>
<td style="text-align: right;">205.570</td>
<td style="text-align: right;">138.1508</td>
<td style="text-align: right;">136.0020</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">country, latin</td>
<td style="text-align: right;">96.055</td>
<td style="text-align: right;">96.055</td>
<td style="text-align: right;">96.0550</td>
<td style="text-align: right;">96.0550</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">easy listening</td>
<td style="text-align: right;">157.920</td>
<td style="text-align: right;">157.920</td>
<td style="text-align: right;">157.9200</td>
<td style="text-align: right;">157.9200</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hip hop</td>
<td style="text-align: right;">64.934</td>
<td style="text-align: right;">179.974</td>
<td style="text-align: right;">116.9894</td>
<td style="text-align: right;">111.6795</td>
<td style="text-align: right;">120</td>
</tr>
<tr class="even">
<td style="text-align: left;">hip hop, Dance/Electronic</td>
<td style="text-align: right;">95.948</td>
<td style="text-align: right;">190.151</td>
<td style="text-align: right;">135.4297</td>
<td style="text-align: right;">131.0500</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hip hop, R&amp;B</td>
<td style="text-align: right;">100.215</td>
<td style="text-align: right;">151.181</td>
<td style="text-align: right;">121.1220</td>
<td style="text-align: right;">111.9700</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">hip hop, country</td>
<td style="text-align: right;">97.984</td>
<td style="text-align: right;">97.984</td>
<td style="text-align: right;">97.9840</td>
<td style="text-align: right;">97.9840</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hip hop, latin, Dance/Electronic</td>
<td style="text-align: right;">171.993</td>
<td style="text-align: right;">171.993</td>
<td style="text-align: right;">171.9930</td>
<td style="text-align: right;">171.9930</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">hip hop, pop</td>
<td style="text-align: right;">73.003</td>
<td style="text-align: right;">203.911</td>
<td style="text-align: right;">118.9619</td>
<td style="text-align: right;">119.9750</td>
<td style="text-align: right;">265</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hip hop, pop, Dance/Electronic</td>
<td style="text-align: right;">72.022</td>
<td style="text-align: right;">196.093</td>
<td style="text-align: right;">120.8555</td>
<td style="text-align: right;">126.0620</td>
<td style="text-align: right;">75</td>
</tr>
<tr class="even">
<td style="text-align: left;">hip hop, pop, R&amp;B</td>
<td style="text-align: right;">60.019</td>
<td style="text-align: right;">203.862</td>
<td style="text-align: right;">115.1808</td>
<td style="text-align: right;">107.2030</td>
<td style="text-align: right;">234</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hip hop, pop, R&amp;B, Dance/Electronic</td>
<td style="text-align: right;">82.820</td>
<td style="text-align: right;">127.901</td>
<td style="text-align: right;">103.9113</td>
<td style="text-align: right;">101.0130</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">hip hop, pop, R&amp;B, latin</td>
<td style="text-align: right;">82.331</td>
<td style="text-align: right;">100.010</td>
<td style="text-align: right;">91.1705</td>
<td style="text-align: right;">91.1705</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hip hop, pop, country</td>
<td style="text-align: right;">129.370</td>
<td style="text-align: right;">129.370</td>
<td style="text-align: right;">129.3700</td>
<td style="text-align: right;">129.3700</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">hip hop, pop, latin</td>
<td style="text-align: right;">89.661</td>
<td style="text-align: right;">180.184</td>
<td style="text-align: right;">127.2119</td>
<td style="text-align: right;">127.0265</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hip hop, pop, rock</td>
<td style="text-align: right;">84.858</td>
<td style="text-align: right;">179.999</td>
<td style="text-align: right;">123.1123</td>
<td style="text-align: right;">125.2500</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">hip hop, rock, pop</td>
<td style="text-align: right;">90.052</td>
<td style="text-align: right;">90.052</td>
<td style="text-align: right;">90.0520</td>
<td style="text-align: right;">90.0520</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">latin</td>
<td style="text-align: right;">90.013</td>
<td style="text-align: right;">198.075</td>
<td style="text-align: right;">121.6049</td>
<td style="text-align: right;">97.0620</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">metal</td>
<td style="text-align: right;">79.012</td>
<td style="text-align: right;">147.387</td>
<td style="text-align: right;">106.2089</td>
<td style="text-align: right;">101.9680</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pop</td>
<td style="text-align: right;">65.043</td>
<td style="text-align: right;">195.685</td>
<td style="text-align: right;">120.6325</td>
<td style="text-align: right;">119.9520</td>
<td style="text-align: right;">411</td>
</tr>
<tr class="even">
<td style="text-align: left;">pop, Dance/Electronic</td>
<td style="text-align: right;">84.878</td>
<td style="text-align: right;">198.065</td>
<td style="text-align: right;">123.7314</td>
<td style="text-align: right;">124.0800</td>
<td style="text-align: right;">213</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pop, Folk/Acoustic</td>
<td style="text-align: right;">76.026</td>
<td style="text-align: right;">171.790</td>
<td style="text-align: right;">118.3595</td>
<td style="text-align: right;">109.9505</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="even">
<td style="text-align: left;">pop, R&amp;B</td>
<td style="text-align: right;">68.942</td>
<td style="text-align: right;">210.851</td>
<td style="text-align: right;">117.0158</td>
<td style="text-align: right;">111.9645</td>
<td style="text-align: right;">170</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pop, R&amp;B, Dance/Electronic</td>
<td style="text-align: right;">84.021</td>
<td style="text-align: right;">176.051</td>
<td style="text-align: right;">112.0338</td>
<td style="text-align: right;">104.0865</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">pop, R&amp;B, easy listening</td>
<td style="text-align: right;">108.984</td>
<td style="text-align: right;">108.984</td>
<td style="text-align: right;">108.9840</td>
<td style="text-align: right;">108.9840</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pop, country</td>
<td style="text-align: right;">97.865</td>
<td style="text-align: right;">147.905</td>
<td style="text-align: right;">130.5087</td>
<td style="text-align: right;">136.9250</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="even">
<td style="text-align: left;">pop, easy listening, Dance/Electronic</td>
<td style="text-align: right;">135.099</td>
<td style="text-align: right;">135.099</td>
<td style="text-align: right;">135.0990</td>
<td style="text-align: right;">135.0990</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pop, easy listening, jazz</td>
<td style="text-align: right;">82.168</td>
<td style="text-align: right;">127.831</td>
<td style="text-align: right;">104.9995</td>
<td style="text-align: right;">104.9995</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">pop, latin</td>
<td style="text-align: right;">79.997</td>
<td style="text-align: right;">177.833</td>
<td style="text-align: right;">113.5903</td>
<td style="text-align: right;">104.2540</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pop, rock</td>
<td style="text-align: right;">77.967</td>
<td style="text-align: right;">176.667</td>
<td style="text-align: right;">121.0976</td>
<td style="text-align: right;">119.0095</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="even">
<td style="text-align: left;">pop, rock, Dance/Electronic</td>
<td style="text-align: right;">87.016</td>
<td style="text-align: right;">189.857</td>
<td style="text-align: right;">133.9808</td>
<td style="text-align: right;">135.9875</td>
<td style="text-align: right;">12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pop, rock, Folk/Acoustic</td>
<td style="text-align: right;">102.961</td>
<td style="text-align: right;">112.960</td>
<td style="text-align: right;">107.9605</td>
<td style="text-align: right;">107.9605</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">pop, rock, metal</td>
<td style="text-align: right;">82.952</td>
<td style="text-align: right;">155.827</td>
<td style="text-align: right;">128.9358</td>
<td style="text-align: right;">134.7165</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rock</td>
<td style="text-align: right;">74.989</td>
<td style="text-align: right;">199.935</td>
<td style="text-align: right;">129.5312</td>
<td style="text-align: right;">123.6960</td>
<td style="text-align: right;">57</td>
</tr>
<tr class="even">
<td style="text-align: left;">rock, Dance/Electronic</td>
<td style="text-align: right;">127.988</td>
<td style="text-align: right;">127.988</td>
<td style="text-align: right;">127.9880</td>
<td style="text-align: right;">127.9880</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rock, Folk/Acoustic, easy listening</td>
<td style="text-align: right;">122.979</td>
<td style="text-align: right;">122.979</td>
<td style="text-align: right;">122.9790</td>
<td style="text-align: right;">122.9790</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">rock, Folk/Acoustic, pop</td>
<td style="text-align: right;">80.529</td>
<td style="text-align: right;">80.529</td>
<td style="text-align: right;">80.5290</td>
<td style="text-align: right;">80.5290</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rock, R&amp;B, Folk/Acoustic, pop</td>
<td style="text-align: right;">105.987</td>
<td style="text-align: right;">105.987</td>
<td style="text-align: right;">105.9870</td>
<td style="text-align: right;">105.9870</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">rock, blues</td>
<td style="text-align: right;">123.904</td>
<td style="text-align: right;">141.933</td>
<td style="text-align: right;">132.9185</td>
<td style="text-align: right;">132.9185</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rock, blues, latin</td>
<td style="text-align: right;">97.911</td>
<td style="text-align: right;">127.981</td>
<td style="text-align: right;">112.9460</td>
<td style="text-align: right;">112.9460</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">rock, classical</td>
<td style="text-align: right;">81.663</td>
<td style="text-align: right;">81.663</td>
<td style="text-align: right;">81.6630</td>
<td style="text-align: right;">81.6630</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rock, easy listening</td>
<td style="text-align: right;">114.999</td>
<td style="text-align: right;">114.999</td>
<td style="text-align: right;">114.9990</td>
<td style="text-align: right;">114.9990</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">rock, metal</td>
<td style="text-align: right;">89.342</td>
<td style="text-align: right;">187.961</td>
<td style="text-align: right;">127.3922</td>
<td style="text-align: right;">120.0555</td>
<td style="text-align: right;">36</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rock, pop</td>
<td style="text-align: right;">68.976</td>
<td style="text-align: right;">184.086</td>
<td style="text-align: right;">123.8996</td>
<td style="text-align: right;">124.9700</td>
<td style="text-align: right;">39</td>
</tr>
<tr class="even">
<td style="text-align: left;">rock, pop, Dance/Electronic</td>
<td style="text-align: right;">113.049</td>
<td style="text-align: right;">181.994</td>
<td style="text-align: right;">135.7678</td>
<td style="text-align: right;">127.4480</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rock, pop, metal</td>
<td style="text-align: right;">126.115</td>
<td style="text-align: right;">152.034</td>
<td style="text-align: right;">140.2785</td>
<td style="text-align: right;">141.4825</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">rock, pop, metal, Dance/Electronic</td>
<td style="text-align: right;">105.013</td>
<td style="text-align: right;">105.013</td>
<td style="text-align: right;">105.0130</td>
<td style="text-align: right;">105.0130</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">set()</td>
<td style="text-align: right;">68.507</td>
<td style="text-align: right;">184.819</td>
<td style="text-align: right;">120.1329</td>
<td style="text-align: right;">126.9620</td>
<td style="text-align: right;">22</td>
</tr>
</tbody>
</table>
</div>
<p>This table provides insights into the tempo characteristics of different genres. This can be useful for research related to musical patterns.</p>
</section>
<section id="question-5" class="level2">
<h2 class="anchored" data-anchor-id="question-5">Question 5</h2>
<p>Here, we are calculating the yearly mean for ‘liveness’ and ‘danceability’ in the songs.</p>
<div class="cell-output-display">
<table class="table">
<caption>Mean Liveness and Danceability Per Year</caption>
<thead>
<tr class="header">
<th style="text-align: right;">Year</th>
<th style="text-align: right;">Mean Liveness</th>
<th style="text-align: right;">Mean Danceability</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1998</td>
<td style="text-align: right;">0.1800000</td>
<td style="text-align: right;">0.7270000</td>
</tr>
<tr class="even">
<td style="text-align: right;">1999</td>
<td style="text-align: right;">0.1656000</td>
<td style="text-align: right;">0.6689737</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2000</td>
<td style="text-align: right;">0.1805216</td>
<td style="text-align: right;">0.6898243</td>
</tr>
<tr class="even">
<td style="text-align: right;">2001</td>
<td style="text-align: right;">0.1736685</td>
<td style="text-align: right;">0.6741296</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2002</td>
<td style="text-align: right;">0.1928467</td>
<td style="text-align: right;">0.6752444</td>
</tr>
<tr class="even">
<td style="text-align: right;">2003</td>
<td style="text-align: right;">0.1631701</td>
<td style="text-align: right;">0.6648763</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2004</td>
<td style="text-align: right;">0.1796552</td>
<td style="text-align: right;">0.6968333</td>
</tr>
<tr class="even">
<td style="text-align: right;">2005</td>
<td style="text-align: right;">0.1875663</td>
<td style="text-align: right;">0.6729231</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2006</td>
<td style="text-align: right;">0.1976642</td>
<td style="text-align: right;">0.6608632</td>
</tr>
<tr class="even">
<td style="text-align: right;">2007</td>
<td style="text-align: right;">0.1836223</td>
<td style="text-align: right;">0.6305213</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2008</td>
<td style="text-align: right;">0.1737474</td>
<td style="text-align: right;">0.6641856</td>
</tr>
<tr class="even">
<td style="text-align: right;">2009</td>
<td style="text-align: right;">0.2141405</td>
<td style="text-align: right;">0.6251667</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2010</td>
<td style="text-align: right;">0.1986150</td>
<td style="text-align: right;">0.6610748</td>
</tr>
<tr class="even">
<td style="text-align: right;">2011</td>
<td style="text-align: right;">0.1747636</td>
<td style="text-align: right;">0.6344040</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2012</td>
<td style="text-align: right;">0.2173391</td>
<td style="text-align: right;">0.6373652</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">0.1908663</td>
<td style="text-align: right;">0.6326404</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2014</td>
<td style="text-align: right;">0.1876317</td>
<td style="text-align: right;">0.6619327</td>
</tr>
<tr class="even">
<td style="text-align: right;">2015</td>
<td style="text-align: right;">0.1765152</td>
<td style="text-align: right;">0.6512626</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2016</td>
<td style="text-align: right;">0.1583172</td>
<td style="text-align: right;">0.6707071</td>
</tr>
<tr class="even">
<td style="text-align: right;">2017</td>
<td style="text-align: right;">0.1549054</td>
<td style="text-align: right;">0.6937387</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2018</td>
<td style="text-align: right;">0.1634561</td>
<td style="text-align: right;">0.7250374</td>
</tr>
<tr class="even">
<td style="text-align: right;">2019</td>
<td style="text-align: right;">0.1615809</td>
<td style="text-align: right;">0.7197640</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2020</td>
<td style="text-align: right;">0.2550000</td>
<td style="text-align: right;">0.7453333</td>
</tr>
</tbody>
</table>
</div>
<p>This table reveals the average liveness and danceability of songs year by year, which might help in analyzing trends in music preferences.</p>
</section>
<section id="question-6" class="level2">
<h2 class="anchored" data-anchor-id="question-6">Question 6</h2>
<p>We visualize the yearly mean values of ‘liveness’ and ‘danceability’ to understand their temporal evolution.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="lab_files/figure-html/first-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="temporal-evolution-of-mean-annual-liveness-and-danceability" class="level3">
<h3 class="anchored" data-anchor-id="temporal-evolution-of-mean-annual-liveness-and-danceability">Temporal Evolution of Mean Annual Liveness and Danceability</h3>
<p>From the graph, the following conclusions and observations can be made:</p>
<section id="overall-trend" class="level4">
<h4 class="anchored" data-anchor-id="overall-trend">Overall Trend:</h4>
<p>Mean danceability has remained relatively consistent over the 20-year period, hovering around 0.75. There are minor fluctuations, but no significant upward or downward trend is observed. This suggests that the danceability of songs has remained relatively stable over the years. Mean liveness has shown more variability over the years. The value was mostly stable from 2000 to around 2014 but has seen a sharp increase from 2015 onwards, peaking around 2020, with a mean of 0.26.</p>
</section>
<section id="year-2015-onwards" class="level4">
<h4 class="anchored" data-anchor-id="year-2015-onwards">Year 2015 Onwards:</h4>
<p>There’s a noticeable uptick in the mean liveness value from 2015 onwards. This sudden rise could be indicative of a change in the music industry, where more live or live-feeling recordings made it to the top hits on Spotify. Another interpretation could be that the method of measuring ‘liveness’ changed or the way music was produced shifted.</p>
</section>
<section id="comparative-analysis" class="level4">
<h4 class="anchored" data-anchor-id="comparative-analysis">Comparative Analysis:</h4>
<p>For the majority of the years, the danceability of songs has been considerably higher than their liveness. This could suggest that, historically, top hits on Spotify have been more geared towards tracks that are catchy and easy to dance to rather than tracks that have a live performance feel. However, as we approach 2020, the gap between danceability and liveness starts to narrow, indicating a shift in preference or production towards songs with a more live-feeling.</p>
</section>
</section>
</section>
</section>
<section id="exercise-2" class="level1">
<h1>Exercise 2</h1>
<section id="question-1-1" class="level2">
<h2 class="anchored" data-anchor-id="question-1-1">Question 1</h2>
<p>We are grouping the dropout dataset by ‘Target’ and ‘Marital Status’ and finding the median ‘Admission Grade’ for these groups.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Target'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
<div class="cell-output-display">
<table class="table">
<caption>Median Admission Grade by Target and Marital Status</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Target</th>
<th style="text-align: left;">Marital status</th>
<th style="text-align: right;">Median Admission</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Dropout</td>
<td style="text-align: left;">single</td>
<td style="text-align: right;">123.35</td>
</tr>
<tr class="even">
<td style="text-align: left;">Dropout</td>
<td style="text-align: left;">married</td>
<td style="text-align: right;">126.50</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dropout</td>
<td style="text-align: left;">divorced</td>
<td style="text-align: right;">126.50</td>
</tr>
<tr class="even">
<td style="text-align: left;">Dropout</td>
<td style="text-align: left;">widower</td>
<td style="text-align: right;">129.40</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dropout</td>
<td style="text-align: left;">facto union</td>
<td style="text-align: right;">119.40</td>
</tr>
<tr class="even">
<td style="text-align: left;">Dropout</td>
<td style="text-align: left;">legally separated</td>
<td style="text-align: right;">112.50</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Graduate</td>
<td style="text-align: left;">single</td>
<td style="text-align: right;">127.30</td>
</tr>
<tr class="even">
<td style="text-align: left;">Graduate</td>
<td style="text-align: left;">married</td>
<td style="text-align: right;">130.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Graduate</td>
<td style="text-align: left;">divorced</td>
<td style="text-align: right;">126.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Graduate</td>
<td style="text-align: left;">widower</td>
<td style="text-align: right;">170.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Graduate</td>
<td style="text-align: left;">facto union</td>
<td style="text-align: right;">120.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Graduate</td>
<td style="text-align: left;">legally separated</td>
<td style="text-align: right;">114.80</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Enrolled</td>
<td style="text-align: left;">single</td>
<td style="text-align: right;">124.05</td>
</tr>
<tr class="even">
<td style="text-align: left;">Enrolled</td>
<td style="text-align: left;">married</td>
<td style="text-align: right;">122.95</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Enrolled</td>
<td style="text-align: left;">divorced</td>
<td style="text-align: right;">130.20</td>
</tr>
<tr class="even">
<td style="text-align: left;">Enrolled</td>
<td style="text-align: left;">widower</td>
<td style="text-align: right;">151.75</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Enrolled</td>
<td style="text-align: left;">facto union</td>
<td style="text-align: right;">119.70</td>
</tr>
<tr class="even">
<td style="text-align: left;">Enrolled</td>
<td style="text-align: left;">legally separated</td>
<td style="text-align: right;">119.00</td>
</tr>
</tbody>
</table>
</div>
<p>This table allows us to examine how median admission grades vary between different target and marital status groups.</p>
</section>
<section id="question-2-1" class="level2">
<h2 class="anchored" data-anchor-id="question-2-1">Question 2</h2>
<p>We are transforming the data to compare the ‘Median Admission Grade’ across marital statuses for each target group.</p>
<div class="cell-output-display">
<table class="table">
<caption>Median Admission Grade by Marital Status and Target</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Marital status</th>
<th style="text-align: right;">Dropout</th>
<th style="text-align: right;">Graduate</th>
<th style="text-align: right;">Enrolled</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">single</td>
<td style="text-align: right;">123.35</td>
<td style="text-align: right;">127.3</td>
<td style="text-align: right;">124.05</td>
</tr>
<tr class="even">
<td style="text-align: left;">married</td>
<td style="text-align: right;">126.50</td>
<td style="text-align: right;">130.0</td>
<td style="text-align: right;">122.95</td>
</tr>
<tr class="odd">
<td style="text-align: left;">divorced</td>
<td style="text-align: right;">126.50</td>
<td style="text-align: right;">126.0</td>
<td style="text-align: right;">130.20</td>
</tr>
<tr class="even">
<td style="text-align: left;">widower</td>
<td style="text-align: right;">129.40</td>
<td style="text-align: right;">170.0</td>
<td style="text-align: right;">151.75</td>
</tr>
<tr class="odd">
<td style="text-align: left;">facto union</td>
<td style="text-align: right;">119.40</td>
<td style="text-align: right;">120.0</td>
<td style="text-align: right;">119.70</td>
</tr>
<tr class="even">
<td style="text-align: left;">legally separated</td>
<td style="text-align: right;">112.50</td>
<td style="text-align: right;">114.8</td>
<td style="text-align: right;">119.00</td>
</tr>
</tbody>
</table>
</div>
<p>Among the dropouts, widowers have the highest median admission grade at 129.40, followed closely by those who are divorced and married. Singles have a median grade of 123.35, while those in a facto union or legally separated have the lowest median admission grades at 119.40 and 112.50 respectively.</p>
<p>Among the graduates, the marital status with the highest median admission grade is widower, with a significantly high score of 170. Married individuals follow at 130.0. It’s worth noting the vast difference between widowers and the rest in this category.</p>
<p>For those enrolled, the divorced group leads with a median grade of 130.20, whereas those in a facto union and legally separated have the lowest median grades, both being under 120.</p>
<p>It appears that, on average, widowers tend to perform exceptionally well in terms of median admission grades when compared to other marital statuses, especially among graduates. The reasons for this might be varied and would require deeper investigation. Also, those who are legally separated or in a facto union generally have the lowest median admission grades across all target outcomes.</p>
</section>
<section id="question-3-1" class="level2">
<h2 class="anchored" data-anchor-id="question-3-1">Question 3</h2>
<p>Here, we are calculating the median of all curricular units, grouped by gender.</p>
<div class="cell-output-display">
<table class="table">
<caption>Conditional Median of Curricular Units by Gender</caption>
<colgroup>
<col style="width: 4%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Gender</th>
<th style="text-align: right;">CU 1S Cred</th>
<th style="text-align: right;">CU 1S Enr</th>
<th style="text-align: right;">CU 1S Eval</th>
<th style="text-align: right;">CU 1S Appr</th>
<th style="text-align: right;">CU 1S Grade</th>
<th style="text-align: right;">CU 1S No Eval</th>
<th style="text-align: right;">CU 2S Cred</th>
<th style="text-align: right;">CU 2S Enr</th>
<th style="text-align: right;">CU 2S Eval</th>
<th style="text-align: right;">CU 2S Appr</th>
<th style="text-align: right;">CU 2S Grade</th>
<th style="text-align: right;">CU 2S No Eval</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Male</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">11.83333</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">11.63604</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Female</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">12.50000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">12.50000</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
<section id="legend" class="level4">
<h4 class="anchored" data-anchor-id="legend">Legend</h4>
<p>Here is a breakdown of the symbols and abbreviations used in the code for table:</p>
<ul>
<li><p><code>CU</code>: Stands for “Curricular Units,” denoting the subject or course components.</p></li>
<li><p><code>1S</code>: Abbreviation for “1st Semester,” indicating the period or term of the course.</p></li>
<li><p><code>2S</code>: Abbreviation for “2nd Semester,” indicating the period or term of the course.</p></li>
<li><p><code>Cred</code>: Short for “credited,” representing the units that have been credited to the student.</p></li>
<li><p><code>Enr</code>: Stands for “enrolled,” showing the number of units the student is currently enrolled in.</p></li>
<li><p><code>Eval</code>: Short for “evaluations,” showing the number of units for which the student has been evaluated.</p></li>
<li><p><code>Appr</code>: Stands for “approved,” indicating the units that the student has passed or been approved for.</p></li>
<li><p><code>Grade</code>: Indicates the grade received by the student for a particular curricular unit.</p></li>
<li><p><code>No Eval</code>: Short for “without evaluations,” denoting the units that have not been evaluated.</p></li>
</ul>
<p>This table provides a gender-based view on the median values of different curricular units, shedding light on academic performance disparities if any.</p>
</section>
</section>
<section id="question-4-1" class="level2">
<h2 class="anchored" data-anchor-id="question-4-1">Question 4</h2>
<p>We are pivoting the data to a long format and then back to a wide format to calculate median values for curricular units by gender.</p>
<div class="cell-output-display">
<table class="table">
<caption>Median Value of Curricular Units by Gender</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Units</th>
<th style="text-align: right;">Male</th>
<th style="text-align: right;">Female</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Curricular units 1st sem (credited)</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Curricular units 1st sem (enrolled)</td>
<td style="text-align: right;">6.00000</td>
<td style="text-align: right;">6.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Curricular units 1st sem (evaluations)</td>
<td style="text-align: right;">8.00000</td>
<td style="text-align: right;">8.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Curricular units 1st sem (approved)</td>
<td style="text-align: right;">4.00000</td>
<td style="text-align: right;">6.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Curricular units 1st sem (grade)</td>
<td style="text-align: right;">11.83333</td>
<td style="text-align: right;">12.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Curricular units 1st sem (without evaluations)</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0</td>
</tr>
</tbody>
</table>
</div>
<p>For credited curricular units in the first semester, both males and females have a median value of 0 and 0 respectively, implying no credited units on average.</p>
<p>Both males and females are enrolled in 6 and 6 curricular units on average in the first semester.</p>
<p>The evaluations of curricular units in the first semester for males and females are 8 and 8 respectively, indicating equal performance.</p>
<p>For approved curricular units in the first semester, males have a median value of 4, while females have a median value of 6, suggesting that females tend to outperform males.</p>
<p>The median grade for curricular units in the first semester for males is 11.8333333, and for females, it’s 12.5.</p>
<p>For curricular units in the first semester without evaluations, both genders have a median of 0 and 0 respectively.</p>
<p>From the data, we can infer that, in terms of curricular units, females tend to have slightly better academic performance, especially in the context of approved units and grades. The differences, however, are not vast and might not be statistically significant, depending on the data distribution and sample size.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>